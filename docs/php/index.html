<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie-edge">
    <title>ilosey14 - Documentation</title>
    <link rel="stylesheet" href="/style.css">
    <style type="text/css">
        p + ul {
            border-bottom: 1px solid #aaa;
        }
        pre .keyword { color: blue; }
        pre .class { color: teal; }
        pre .function { color: brown; }
        pre .string { color: forestgreen;}
        .documentation-button-container {
            margin: 15px;
            text-align: center;
        }
        .documentation {
            max-height: 10000px;
            opacity: 1;
            transition: max-height 0.5s, opacity 0.5s;
        }
        .documentation.collapse {
            max-height: 0px;
            opacity: 0;
            overflow: hidden;
        }
    </style>
    <script src="/src/common.js"></script>
</head>
<body>
    <!-- header -->
    <div class="header">
        <div class="content">
            <h1>Documentation</h1>
        </div>
        <div class="ribbon">
            <div class="block blue"></div>
            <div class="block green"></div>
            <div class="block yellow"></div>
            <div class="block red"></div>
        </div>
    </div>
    <!-- content -->
    <div class="content-wrapper">
        <div class="content-container">
            <!-- intro -->
            <div class="content-tile">
                <h2>/lib</h2>
                <p><a href="/">Home</a></p>
                <p><i>
                    Note: This is a rather cumbersome write-up of my libraries and api's.
                    There's probably better ways to spend your time.
                </i></p>
            </div>
            <hr>
            <!-- table of contents -->
            <div class="content-tile">
                <ul>
                    <li>
                        <a href="#common-php">common.php</a>
                    </li>
                    <li>
                        <a href="#sql-php">sql.php</a>
                    </li>
                    <li>
                        <a href="#view-php">view.php</a>
                    </li>
                </ul>
            </div>
            <div class="content-tile">
                <a name="common-php"></a>
                <h1>common.php</h1>
                <p>
                    A class of common functions.
                </p>
                <p>
                    TODO: anecdotes and examples
                </p>
            </div>
            <div class="content-tile documentation-button-container">
                <input type="checkbox" id="common-php-documentation-button" class="-documentation-button" value="common-php-documentation">
                <label for="common-php-documentation-button">Documentation</label>
            </div>
            <div id="common-php-documentation" class="content-tile documentation">
                <h2>Static Methods</h2>
                <p>
                    <code>Common::return(array $obj): void</code><br>
                    Echos an object as a JSON string and exits.
                </p>
                <ul>
                    <li>
                        <code>$obj</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>The object to JSON encode and echo</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>Common::escape(string $value = null): string</code><br>
                    Escapes a GET/POST string.
                    HTML special characters are encoded and leading/trailing whitespace is trimmed.
                </p>
                <ul>
                    <li>
                        <code>$value</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The value to escape</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>Common::randomToken(int $length): string</code><br>
                    Builds a random token string.
                    Token characters := /[_\-0-9A-Za-z]/
                </p>
                <ul>
                    <li>
                        <code>$length</code><br>
                        <ul>
                            <li><i>int</i></li>
                            <li>Length of the token</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>Common::redirect(string $url = '', array $params = null, string $hash = ''): void</code><br>
                    Redirects the client to an absolute url.
                    Sets the "Location" header proptery.
                </p>
                <ul>
                    <li>
                        <code>$url</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The absolute url to the root domain</li>
                        </ul>
                    </li>
                    <li>
                        <code>$params</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>Associative array of url parameters</li>
                        </ul>
                    </li>
                    <li>
                        <code>$hash</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>A hash string including the '#' character</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>Common::getLoginStatus(): bool</code><br>
                    Gets the login status of the current session.
                    Verifies access tokesn between the client and the user session.
                </p>
                <ul></ul>
                <p>
                    <code>Common::formatDate(string $date_time_str, bool $time = false, $timezone_offset = null): string</code><br>
                    Formats a date (and time) string for the client.
                    Performs formatting and timezone offsetting if available.
                </p>
                <ul>
                    <li>
                        <code>$date_time_str</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>A parseable date or date-time string</li>
                        </ul>
                    </li>
                    <li>
                        <code>$time</code><br>
                        <ul>
                            <li><i>bool</i></li>
                            <li>Whether time is present in the $date_time_str and to be formatted</li>
                        </ul>
                    </li>
                    <li>
                        <code>$timezone_offset</code><br>
                        <ul>
                            <li><i>int</i></li>
                            <li>The hour offset from UTC time</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="content-tile">
                <a name="sql-php"></a>
                <h1>sql.php</h1>
                <p>
                    TODO: do the thing here
                </p>
            </div>
            <div class="content-tile documentation-button-container">
                <input type="checkbox" id="sql-php-documentation-button" class="-documentation-button" value="sql-php-documentation">
                <label for="sql-php-documentation-button">Documentation</label>
            </div>
            <div id="sql-php-documentation" class="content-tile documentation collapse">
                <h2>Static Methods</h2>
                <p>
                    <code>SQL::connect(string $host?, string $root?, string $password?, string $database?): void</code><br>
                    Instantiates a new mysqli connection with a database.
                </p>
                <ul>
                    <li>
                        <code>$host? = null</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Host URI</li>
                        </ul>
                    </li>
                    <li>
                        <code>$root? = null</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Root name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$password? = null</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Root password</li>
                        </ul>
                    </li>
                    <li>
                        <code>$database? = null</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Database name</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>SQL::close(): void</code><br>
                    Closes the connection to the database.
                </p>
                <ul></ul>
                <p>
                    <code>SQL::init(mixed $tables?): void</code>
                    Initializes dependencies.
                </p>
                <ul>
                    <li>
                        <code>$tables? = -1</code><br>
                        <ul>
                            <li><i>int|array&lt;int&gt;</i></li>
                            <li>Enumerations of tables to initialize.</li>
                            <li>i.e. <code>SQL::TABLE_USERS</code>, etc</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>SQL::query(\SQL\Query $query): mysqli_stmt</code><br>
                    Prepares and executes an SQL query.
                </p>
                <ul>
                    <li>
                        <code>$query</code><br>
                        <ul>
                            <li><i>\SQL\Query</i></li>
                            <li>Query object to execute</li>
                        </ul>
                    </li>
                    <li>Returns the prepared and executed mysqli query statement</li>
                </ul>
                <p>
                    <code>SQL::getResult(mysqli_stmt $stmt, int $fetch_type?): array|null</code><br>
                    Gets the specified result type from an executed MySQLi statement.
                </p>
                <ul>
                    <li>
                        <code>$stmt</code><br>
                        <ul>
                            <li><i>mysqli_stmt</i></li>
                            <li>MySQLi statement object</li>
                        </ul>
                    </li>
                    <li>
                        <code>$fetch_type? = SQL::FETCH_ALL</code><br>
                        <ul>
                            <li><i>int</i></li>
                            <li>Whether to return the first row or all rows</li>
                        </ul>
                    </li>
                    <li>Returns the result array of null if no rows were returned</li>
                </ul>
                <p>
                    <code>SQL::getRow(string $table, array $id, array $prop_names?): array|null</code><br>
                    Gets the <code>$prop_names</code> info about a row by its unique id(s).
                </p>
                <ul>
                    <li>
                        <code>$table</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Table name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$id</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>Unique row column-name and value</li>
                        </ul>
                    </li>
                    <li>
                        <code>$prop_names = ['*']</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>An associative array or null if no rows are found</li>
                        </ul>
                    </li>
                    <li>Returns an associated array or null if no rows were found</li>
                </ul>
                <p>
                    <code>SQL::getRows(string $table, array $params, array $prop_names?): array|null</code><br>
                    Gets an array of rows by their <code>$prop_names</code>.
                </p>
                <ul>
                    <li>
                        <code>$table</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Table name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$params</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li><code>where</code>, <code>order_by</code>, <code>sort</code>, <code>limit</code>, <code>offset</code></li>
                        </ul>
                    </li>
                    <li>
                        <code>$prop_names = ['*']</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>An array of results or null if no rows were found</li>
                        </ul>
                    </li>
                    <li>Returns an array of result rows of null if no rows were found</li>
                </ul>
                <p>
                    <code>SQL::setRow(string $table, array $id, array $prop_list): int</code><br>
                    Sets the column values in <code>$prop_list</code> of a row by its unique id.
                </p>
                <ul>
                    <li>
                        <code>$table</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Table name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$id</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>Unique row column-name and value of rows to set</li>
                        </ul>
                    </li>
                    <li>
                        <code>$prop_names</code>
                        <ul>
                            <li><i>array</i></li>
                            <li>Associative array of column values</li>
                        </ul>
                    </li>
                    <li>Returns the number of affected rows</li>
                </ul>
                <p>
                    <code>SQL::insertRow(string $table, array $prop_list): int</code><br>
                    Inserts a new row into a table.
                </p>
                <ul>
                    <li>
                        <code>$table</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Table name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$prop_list</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>Asociative array of column values</li>
                        </ul>
                    </li>
                    <li>Returns the number of affected rows</li>
                </ul>
                <p>
                    <code>SQL::deleteRow(string $table, array $id): int</code><br>
                    Deletes a row from a table.
                </p>
                <ul>
                    <li>
                        <code>$table</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Table name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$id</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>Unique row column-name and value of the row to delete</li>
                        </ul>
                    </li>
                    <li>Returns the number of affected rows</li>
                </ul>
                <p>
                    <code>SQL::escape(string $value): string</code><br>
                    Escapes/sanitizes a string used to query the connected database.
                </p>
                <ul>
                    <li>
                        <code>$value</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The value to sanitize</li>
                        </ul>
                    </li>
                    <li>Returns the sanitized string</li>
                </ul>
                <p>
                    <code>SQL::return(array $obj): void</code><br>
                    Echos a JSON encoded string and exits the script.
                </p>
                <ul>
                    <li>
                        <code>$obj</code><br>
                        <ul>
                            <li><i>array</i></li>
                            <li>An associated array to echo</li>
                        </ul>
                    </li>
                </ul>
                <hr>
                <h2>Constants</h2>
                <p>
                    <code>SQL::FETCH_FIRST</code>
                </p>
                <ul>
                    <li>For <code>SQL::getResults</code></li>
                    <li>Returns the first result in from the query</li>
                </ul>
                <p>
                    <code>SQL::FETCH_ALL</code>
                </p>
                <ul>
                    <li>For <code>SQL::getReults</code></li>
                    <li>Returns all results from the query</li>
                </ul>
                <p>
                    <code>SQL::&lt;TABLE_ENUM&gt;</code>
                </p>
                <ul>
                    <li>For <code>SQL::init</code></li>
                    <li>
                        Set these values in the class definition and implement them in <code>SQL::init</code>
                        to initialize and interface with any existing table classes
                    </li>
                </ul>
            </div>
            <div class="content-tile">
                <a name="view-php"></a>
                <h1>view.php</h1>
                <p>
                    TODO: anecote and examples here too
                </p>
                <p>
                    Talk about how public flags and values can be added based on components and
                    persistent value dependencies
                </p>
                <p>
                    Table about the expected file structure to correctly render a page.
                </p>
            </div>
            <div class="content-tile documentation-button-container">
                    <input type="checkbox" id="messagebox-js-documentation-button" class="-documentation-button" value="messagebox-js-documentation">
                    <label for="messagebox-js-documentation-button">Documentation</label>
            </div>
            <div id="messagebox-js-documentation" class="content-tile documentation collapse">
                <h2>Methods</h2>
                <p>
                    <code>View::__construct(string $title, string $page?): View</code><br>
                    Instantiates a new View object.
                </p>
                <ul>
                    <li>
                        <code>$title</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The page title</li>
                        </ul>
                    </li>
                    <li>
                        <code>$page? = '/'</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The page path i.e. "/about"</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>View::render(): void</code><br>
                    Renders the specified template with the current set values.
                </p>
                <ul></ul>
                <p>
                    <code>View::__set(string $name, mixed $value): void</code><br>
                    Sets a template variable to access in the page or template component.
                </p>
                <ul>
                    <li>
                        <code>$name</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>Variable name</li>
                        </ul>
                    </li>
                    <li>
                        <code>$value</code><br>
                        <ul>
                            <li><i>mixed</i></li>
                            <li>Variable value</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    <code>View::_get(string $name): void</code><br>
                    Gets a template variable value.
                </p>
                <ul>
                    <li>
                        <code>$name</code><br>
                        <ul>
                            <li><i>string</i></li>
                            <li>The name of an existing variable</li>
                        </ul>
                    </li>
                    <li>Returns the value of the existing variable, otherwise null</li>
                </ul>
            </div>
        </div>
    </div>
    <!-- footer -->
    <div class="footer">
        <div class="footer">
            <div class="ribbon">
                <div class="block blue"></div>
                <div class="block green"></div>
                <div class="block yellow"></div>
                <div class="block red"></div>
            </div>
            <div class="content">
                <p>
                    Copyright &copy; 2020 ilosey14 |
                    All Rights Reserved
                </p>
            </div>
        </div>
    </div>
    <!-- scripts -->
    <style type="text/css">
        @media only screen and (max-width: 400px) {
            #messagebox-container {
                min-width: 100px !important;
                max-width: 95%;
            }
        }
        #messagebox-mask {
            position: fixed;
            top: 0px;
            left: 0px;
            height: 100vh;
            width: 100vw;
            background-color: rgba(225,225,225,0.25);
            visibility: hidden;
            z-index: 100;
            text-align: center;
            line-height: 100vh;
        }
        #messagebox-mask.-show-messagebox {
            visibility: visible !important;
        }
        #messagebox-container {
            position: relative;
            display: inline-block;
            min-width: 300px;
            max-width: 720px;
            max-height: 90%;
            background-color: #fff;
            border-radius: 2px;
            box-shadow: 0px 1px 4px -1px rgba(0,0,0,0.3);
            overflow-y: auto;
            vertical-align: middle;
            line-height: initial;
        }
        #messagebox-content, #messagebox-buttons {
            padding: 10px;
        }
        #messagebox-buttons {
            text-align: center;
        }
        .-messagebox-templates {
            display: none;
        }
    </style>
    <div id="messagebox-mask">
        <div id="messagebox-container">
            <div id="messagebox-content"></div>
            <div id="messagebox-buttons"></div>
        </div>
    </div>
    <script type="text/javascript" src="/src/messagebox.js"></script>
    <script type="text/javascript">
        // documentation buttons
        [].forEach.call($.class('-documentation-button'), function (button) {
            var docs = $(button.value);

            button.onchange = function () {
                docs.classList.toggle('collapse', !this.checked);
            };
        });

        // demos
        $('messagebox-demo-1').onclick = function () {
            messagebox('Hello World!', ['Hello', 'Goodbye']);
        };
    </script>
</body>
</html>
